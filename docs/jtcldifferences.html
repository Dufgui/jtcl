<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at Aug 30, 2014 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
    <title>JTcl Differences</title>
    <style type="text/css" media="all">
      @import url("../css/maven-base.css");
      @import url("../css/maven-theme.css");
      @import url("../css/site.css");
    </style>
    <link rel="stylesheet" href="../css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20140830" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                        <a href="https://jtcl-project.github.io/jtcl/" id="bannerLeft">
                                                <img src="../images/jtcl-horz-med.png" alt="JTcl" />
                </a>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
        
                <div class="xleft">
        <span id="publishDate">Last Published: 2014-08-30</span>
                  &nbsp;| <span id="projectVersion">Version: 2.7.0</span>
                      </div>
            <div class="xright">                    <a href="http://www.tcl.tk/" class="externalLink" title="Tcl">Tcl</a>
            |
                        <a href="http://www.oracle.com/technetwork/java/index.html" class="externalLink" title="Java">Java</a>
              
        
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
        
                                <h5>JTcl Links</h5>
                  <ul>
                  <li class="none">
                          <a href="https://github.com/jtcl-project/jtcl/releases" class="externalLink" title="Download">Download</a>
            </li>
                  <li class="none">
                          <a href="../news.html" title="News">News</a>
            </li>
                  <li class="none">
                          <a href="../gettingstarted.html" title="Getting Started">Getting Started</a>
            </li>
                  <li class="none">
                          <a href="../docs/index.html" title="Documentation">Documentation</a>
            </li>
                  <li class="none">
                          <a href="../faq.html" title="FAQ">FAQ</a>
            </li>
                  <li class="none">
                          <a href="../projects.html" title="Projects Using JTcl">Projects Using JTcl</a>
            </li>
                  <li class="none">
                          <a href="https://github.com/jtcl-project/jtcl/issues" class="externalLink" title="Bugs">Bugs</a>
            </li>
                  <li class="none">
                          <a href="https://groups.google.com/forum/#!forum/jtcl-project" class="externalLink" title="Mailing Lists">Mailing Lists</a>
            </li>
                  <li class="none">
                          <a href="https://github.com/jtcl-project/jtcl/" class="externalLink" title="Source Code">Source Code</a>
            </li>
                  <li class="none">
                          <a href="https://github.com/jtcl-project/jtcl" class="externalLink" title="Project Page">Project Page</a>
            </li>
                  <li class="none">
                          <a href="../licenses.html" title="License">License</a>
            </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                   
        
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>JTcl Differences from Tcl 8.4<a name="JTcl_Differences_from_Tcl_8.4"></a></h2><p>While JTcl is mostly compatible with Tcl 8.4, there are some differences compared to the C/Tcl version. This page supercedes the Tcl 8.4 documentation.</p><ul><li>Regular expressions: Tcl ARE (<i>Advanced Regular Expression</i>) syntax is supported with some caveats.<ul><li>JTcl uses the Java regular expression engine <i>java.util.regex</i>, rather than a port of the Tcl ARE library. However, <i>java.util.regex</i> regular expression syntax is not supported.</li><li>Several Tcl ARE patterns are substituted at runtime to the corresponding valid <i>java.util.regex</i> patterns. For example, Tcl ARE pattern <b>[:alnum:]</b> is replaced by <b>\p<a name="Alnum">Alnum</a></b>.</li><li>Basic REs are not supported (embedded option 'b' causes PatternSyntaxException)</li><li>Extended REs are not supported, unless they are ARE-compatible and are not explicitly requested with the 'e' embedded option ('e' causes PatternSyntaxException) </li><li>Tcl ARE always attempts to match the longest string starting from the outermost levels to the inner levels of parens. With alternation <b>(|)</b>, TCL chooses the longest match of all the branches. Java's <i>java.util.regex</i> on the other hand, evaluates the RE from left to right, and returns the first successful match, even if it is not the longest. </li><li>Some syntax errors that would occur in Tcl ARE do not occur because <i>java.util.regex</i> is more forgiving of bad RE syntax.</li></ul></li></ul><ul><li>Some <b>file</b> options are limited due to Java 1.5 API restrictions:<ul><li><b>file atime</b> is not supported.</li><li><b>file attributes</b> is not supported.</li><li><b>file stat</b> does not return information for <b>dev, gid, ino, mode</b>, and <b>nlink</b> attributes; <b>ctime</b> and <b>atime</b> attributes report the same value as <b>mtime</b>.</li><li><b>file link</b> and <b>file readlink</b> return an absolute, canonical path to the target of the link, even if the target is a relative path.</li><li><b>file link</b> cannot create links.</li><li>With Java 1.5, <b>file executable</b> on Windows returns 1 if the extension is <i>exe</i>, <i>com</i>, or <i>bat</i> or the file is a directory. On other platforms, it always returns 1. With Java 1.6+, <b>executable</b> returns 1 if <i>java.io.File.canExecute()</i> is true.</li><li><b>file owned</b> always returns 1 if the file exists.</li></ul></li></ul><ul><li>Integer expressions are always computed with 64-bit integers, so any overflow/underflow with 32-bit integers will not occur. JTcl acts similar to Tcl 8.4 compiled on a 64-bit architecture.</li></ul><ul><li>JTcl uses Java sorting utilities rather than a custom implementation, and may return results differently. For examle, <b>lsort -index 0 {{a b} {a c}}</b> can sort into either order. Likewise, unsorted results from <b>array names</b>, etc. may be returned in a different order due to using Java hashing algorithms.</li></ul><ul><li><b>encoding</b>, <b>fconfigure -encoding</b> and <b>source -encoding</b> map characters using Java's Unicode facilities. JTcl replaces illegal UTF-8 byte sequences with the Unicode replacement character U+FFFD, rather than their Cp1252 equivalent. </li></ul><ul><li><b>exec</b> and <b>open</b> pipes are somewhat limited due to the Java 1.5 process model which does not allow proper stdio file descriptor inheritance and true OS-level pipes.<ul><li>Background processes will not survive the JVM process if they read from stdin or write to stdout or stderr</li><li>JTcl may send more stdin to a subprocess than it actually reads, causing the unread input to be lost</li><li>To limit stdin stealing from the shell, processes started in the background with <i>&amp;</i> do not automatically inherit stdin</li></ul></li></ul><ul><li><b>errorInfo</b> sometimes reports deep errors as <i>invoked from within</i> rather than <i>while executing</i>.</li></ul><ul><li><b>pid</b> returns the filename referenced by <b>/proc/self</b> on those operating systems that support it, and returns -1 on other operating systems. <b>pid</b> <i>fileid</i> may return -1 if the PIDs of the pipeline cannot be determined using a non-portable reflection on <i>java.lang.Process</i>.</li></ul><ul><li>The standard shell, <i>tcl.lang.Shell</i>, always sets the <b>tcl_interactive</b> variable to 1 unless a JTcl script is specified as an argument. It cannot differentiate true terminal interaction and a stdin input redirection. Therefore, if a script is sent to <i>tcl.lang.Shell</i> via stdin redirection, the shell will print the <i>%</i> prompt as if it were interacting with a terminal. As a workaround, either explicitly set <b>tcl_interactive</b> to 0 to suppress the prompt, or use <i>tcl.lang.NonInteractiveShell</i> which sets <b>tcl_interactive</b> to 0 prior to any command processing.</li></ul><ul><li><b>load</b> is not supported.</li></ul><ul><li><b>info nameofexecutable</b> creates a temporary script file to invoke the Java executable with the current classpath and the name of the JTcl main class. The temporary script file is deleted on exit.</li></ul><ul><li>JTcl allows file path names to be prefixed with <b>resource:/</b> for <i>open</i> and <i>source</i> commands. which allow opening or sourcing files that are included on the Java CLASSPATH, or within any jar file on the CLASSPATH. Resource files may only be opened in read only mode. Note that use of resource:/ is not supported by the <i>file</i> command.</li></ul><p>JTcl also includes the following backported 8.5 commands:</p><ul><li><b>apply</b></li><li><b>dict</b></li><li><b>lassign</b></li><li><b>lrepeat</b></li><li><b>lreverse</b></li><li><b>source -encoding name</b> and the <b>-encoding</b> shell command line option (e.g., <i>jtcl -encoding enc-name source.tcl</i>, where enc-name is a valid JTcl character encoding.)</li></ul></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                   2014.
          All Rights Reserved.      
        
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
